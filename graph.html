<!DOCTYPE html>

<head>
	<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	<script src="script.js"> </script>
	<script src="plotly-latest.min.js"></script>
	<link rel="stylesheet" href="style.css">
	<title> Graph </title>


</head>



<body>
	<!-- Topbar --> 
	<div class="topbar">
		<center>
			<img class="logo" src="logofinal.jpg">
		</center>
	</div>	

	<!-- Toolbar -->
	<div class="toolbar">
		<ul>
		  <li><a class="active" href="data.html">Data</a></li>
		  <li><a href="landing.html">Home</a></li>
		  <li><a href="graph.html">Graph</a></li>
		</ul>
	</div>


<div class="left">
	<!-- Group of buttons --> 
	<div class="btngroup"><center>
		<button class="functionbtn" onclick="colorByFunction()"> Color by Function Group </button>
		<button class="functionbtn" onclick="showInteractions()"> Show Interactions </button>
		<button class="functionbtn" onclick="autoscalePlot()"> Autoscale Plot </button>
		<button class="functionbtn" onclick="heatmap()"> Heatmap </button>
	</center></div>


	<!-- Group of dropdowns -->
	<div class="dropdowngroup"><center>
		<form>
			<label class="labels"> X-axis: </label>
			<select class="dropdown" id="xlabel" onchange="onchangeEvent()">
				<option> Select option... </option>
				<option> Adult body size </option>
				<option> Current body size </option>
				<option> Juvenile body size </option>				
				<option> Abundance </option>
				<option> Trophic index </option>
			</select>
		</form>

		<form>
			<label class="labels"> Y-axis: </label>
			<select class="dropdown" id="ylabel" onchange="onchangeEvent()">
				<option> Select option... </option>
				<option> Adult body size </option>
				<option> Current body size </option>
				<option> Juvenile body size </option>
				<option> Abundance </option>
				<option> Trophic index </option>
			</select>
		</form>


		<form>
			<label class="labels"> Size: </label>
			<select class="dropdownsize" id="sizelabel" onchange="onchangeEvent()">
				<option> Select option... </option>
				<option> Abundance </option>
				<option> Trophic index </option>
			</select>
		</form>

	</center></div>
</div>

	<div class="xaxis">
		<p class="xaxislabels"> Aphid </p>
		<p class="xaxislabels"> Woodlouse </p>
		<p class="xaxislabels"> Mongoose </p>
		<p class="xaxislabels"> Elephant </p>
	</div>


	<!-- Y Graph --> 
	<div class="ygraph" id="ygraph">
        

	</div>
    
    
    

	<!-- Actual Graph -->
	<div class="graph" id = "graph">
        
        <!-- <iframe id="frame" src="GraphProto.html" height="348" width = "348" document.getElementById("graph").offsetWidth>
            Alternative text for browsers that do not understand IFrames.
        </iframe>-->

	</div>

	<!-- Y Axis Labels -->
	<div class="yaxis"> 
		<p> Mongoose</p>
		</br>
		</br>
		</br>
		</br>
		</br>
		</br>
		</br>
		</br>
		<p> Woodlouse </p>
	</div>

	<!-- X Graph -->
	<div class="xgraph" id="xgraph"> 

	</div>



<!-- JAVASCRIPT!!!!! -->
<script>
var myPlot = document.getElementById("graph");

/* FOR THE GRAPH!!! */
function getRandomInt(min, max) {
  min = Math.ceil(min);
  max = Math.floor(max);
  return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive
}

/* CODE TO MAKE GRAPH */
var xlabel = document.getElementById("xlabel").value;
var ylabel = document.getElementById("ylabel").value;
var sizelabel = document.getElementById("sizelabel").value;


function makeGraph () {
		document.getElementById("graph").style.border="none";
		var trace1 = {
		  y: [getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20)],

		  mode: 'markers',
		  marker: {
		  	size: [getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40),
				   getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40)],
		    color: "gray",
		  }
		};

		var trace2 = {
		  y: [getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20)],

		  mode: 'markers',
		  marker: {
		  	size: [getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40),
				   getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40)],
		    color: "gray",
		  }
		};

		var trace3 = {
		  y: [getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20)],

		  mode: 'markers',
		  marker: {
		  	size: [getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40),
				   getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40)],
		    color: "gray",
		  }
		};

		var trace4 = {
		  y: [getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20)],

		  mode: 'markers',
		  marker: {
		  	size: [getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40),
				   getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40)],
		    color: "gray",
		  }
		};

		var trace5 = {
		  y: [getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20)],

		  mode: 'markers',
		  marker: {
		  	size: [getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40),
				   getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40), getRandomInt(0, 40)],
		    color: "gray",
		  }
		};

		var data = [trace1, trace2, trace3, trace4, trace5];

		var layout = {
		  autosize: false,
		  width: 350,
		  height: 350,
		  margin: {
		    l: 0,
		    r: 0,
		    b: 0,
		    t: 0,
		    pad: 0
		  },
		  xaxis: {
		  	showline: false,
		  	showgrid: false
		  },
		  yaxis: {
		  	showline: false,
		  	showgrid: false
		  },
		  showlegend: false,
		  hovermode: "closest",

		};

		Plotly.newPlot("graph", data, layout);

}



/* BUTTON/DROPDOWN FUNCTIONS HERE */
function onchangeEvent () {
	makeGraph();
}

function clicked() {
	if( localStorage.getItem("color") == "yes") {
		localStorage.setItem("color", "no");
	}
	else {
		localStorage.setItem("color", "yes");
	}
}

function colorGraph() {
	if(localStorage.getItem("color") == "yes") {
		var update ={
			"marker.color": ["red", "green", "orange", "blue", "yellow"]
		};	
		Plotly.restyle("graph", update);
	}
	else {
		var update ={
			"marker.color": "gray"
		};	
		Plotly.restyle("graph", update);
	}
}

function colorByFunction() {
	colorGraph();
	clicked();
}

function getRandomInt(min, max) {
  min = Math.ceil(min);
  max = Math.floor(max);
  return Math.floor(Math.random() * (max - min)) + min;  
}

localStorage.setItem("plots", "yes");
function makePlots() {

	/* Y axis graph */
	var trace1 = {
		x: [getRandomInt(0, 5), getRandomInt(0, 5), getRandomInt(0, 5),getRandomInt(0, 5) ],
		y: [getRandomInt(0, 3), getRandomInt(3, 6), getRandomInt(6, 9),getRandomInt(9, 12) ],
	};

	var trace2 = {
		x: [getRandomInt(0, 5), getRandomInt(0, 5), getRandomInt(0, 5),getRandomInt(0, 5) ],
		y: [getRandomInt(0, 3), getRandomInt(3, 6), getRandomInt(6, 9),getRandomInt(9, 12) ],
	};

	var trace3 = {
		x: [getRandomInt(0, 5), getRandomInt(0, 5), getRandomInt(0, 5),getRandomInt(0, 5) ],
		y: [getRandomInt(0, 3), getRandomInt(3, 6), getRandomInt(6, 9),getRandomInt(9, 12) ],
	};

	var ydata = [trace1, trace2, trace3];
	
	var ylayout = {
	  autosize: false,
	  width: 100,
	  height: 350,
	  margin: {
	    l: 0,
	    r: 0,
	    b: 0,
	    t: 0,
	    pad: 0
	  },
	  xaxis: {
	  	showline: false,
	  	showgrid: false
	  },
	  yaxis: {
	  	showline: false,
	  	showgrid: false
	  },
	  showlegend: false,
	};

	Plotly.newPlot("ygraph", ydata, ylayout);

	var trace4 = {
		x: [getRandomInt(0, 3), getRandomInt(3, 6), getRandomInt(6, 9),getRandomInt(9, 12) ],
		y: [getRandomInt(0, 5), getRandomInt(0, 5), getRandomInt(0, 5),getRandomInt(0, 5) ],
	};

	var xdata = [trace4];

	var xlayout = {
	  autosize: false,
	  width: 350,
	  height: 80,
	  margin: {
	    l: 0,
	    r: 0,
	    b: 0,
	    t: 0,
	    pad: 0
	  },
	  xaxis: {
	  	showline: false,
	  	showgrid: false
	  },
	  yaxis: {
	  	showline: false,
	  	showgrid: false
	  },
	  showlegend: false,
	};

	Plotly.newPlot("xgraph", xdata, xlayout);

}

function clickedAutoscale() {
	if( localStorage.getItem("plots") == "yes") {
		localStorage.setItem("plots", "no");
	}
	else {
		localStorage.setItem("plots", "yes");
	}
}

function autoscalePlot() {
	if( localStorage.getItem("plots") == "yes") {
		makePlots();
		document.getElementById("xgraph").style.visibility = "visible";
		document.getElementById("ygraph").style.visibility = "visible";
	}
	else {
		document.getElementById("xgraph").style.visibility = "hidden";
		document.getElementById("ygraph").style.visibility = "hidden";
	}
	clickedAutoscale();
}


function showInteractions() {
	makeGraph();
}

localStorage.setItem("heatmap", "true");
function clickedHeatmap() {
	if( localStorage.getItem("heatmap") == "true") {
		localStorage.setItem("heatmap", "false");
	}
	else {
		localStorage.setItem("heatmap", "true");
	}
}

function heatmap() {
	if( localStorage.getItem("heatmap") == "true") {
		var data = [
		  {
		    z: [[getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20)], 
		    	[getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20)], 
		    	[getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20)],
		    	[getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20)],
		  	    [getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20)],
				[getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20)],
				[getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20)],
				[getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20)],
				[getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20)],
				[getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20)],
				[getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20)],
				[getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20)],

				[getRandomInt(0, 20), getRandomInt(0, 20), getRandomInt(0, 20)]],
		    type: 'heatmap'
		  }
		];

		var layout = {
		  autosize: false,
		  width: 360,
		  height: 350,
		  margin: {
		    l: 0,
		    r: 0,
		    b: 0,
		    t: 0,
		    pad: 0
		  },
		  xaxis: {
		  	showline: false,
		  	showgrid: false,

		  },
		  yaxis: {
		  	showline: false,
		  	showgrid: false,
		  },
		  showlegend: false,

		};

		Plotly.newPlot("graph", data, layout);
	}
	else {
		makeGraph();
	}
	clickedHeatmap();
}

</script>


















</body>
</html>